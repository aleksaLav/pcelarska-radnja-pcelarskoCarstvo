function prikaziProizvodeIzKorpe(){let t=PROIZVODIuKORPI();$.ajax({url:"data/proizvodi.json",success:function(n){ispisiTabelu(n=n.filter(n=>{for(let i of t)if(n.id==i.id)return n.kolicina=i.kolicina,!0;return!1}))}})}function ispisiTabelu(t){let n='\n            <table class="timetable_sub">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\n\t\t\t\t\t\t<th>SLIKA</th>\n\t\t\t\t\t\t<th>NAZIV PROIZVODA</th>\n                        <th>CENA PO KOMADU</th>\n                        <th>KOLIČINA</th>\n\t\t\t\t\t\t<th>UKUPNA CENA ZA OVAJ PROIZVOD</th>\n\t\t\t\t\t\t<th>IZBACI IZ KORPE</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n                <tbody>';t.forEach(t=>{n+=`<tr>\n        \n        <td >\n            <a href="single.html">\n                <img src="${t.slika.src}" style='height:100px' alt="${t.slika.alt}" class="img-responsive">\n            </a>\n        </td>\n        <td >${t.naziv}</td>\n        <td >$${t.cena.nova}</td>\n        <td >\n        <input type="number" data-id="${t.id}" class="quantity" name="quantity" min="1" max="7" value="${t.kolicina}"> \n        </td>\n        <td id="cena">${function(t){let n;return n=t.kolicina*t.cena.nova}(t)} rsd</td>\n        <td >\n            <div>\n                <div><button type="submit" onclick='obrisiIzKorpe(${t.id})'>Obriši</button> </div>\n            </div>\n        </td>\n    </tr>`}),n+=`<tr>\n    <th colspan="4">UKUPNO IMATE DA PLATITE:</th>\n    <th>${function(){let n=0;for(let i of t)n+=i.cena.nova*i.kolicina;return n}()} din</th> \n    <th><button class="p-2" onclick="obavestenje()">NARUČI</ button></th> \n    </tr> </tbody>\n            </table>`,$("#content").html(n),$(".quantity").on("change",updateKolicinaIUkupnaCenaPoProizvodu)}function updateKolicinaIUkupnaCenaPoProizvodu(){console.log($(this).val());let t=PROIZVODIuKORPI(),n=Number($(this).val()),i=$(this).data("id");for(let o in t)if(t[o].id==i){t[o].kolicina=n;break}localStorage.setItem("products",JSON.stringify(t)),prikaziProizvodeIzKorpe()}function PrikazZaPraznuKorpu(){$("#content").html("<h1>TVOJA KORPA JE PRAZNA!</h1>")}function PROIZVODIuKORPI(){return JSON.parse(localStorage.getItem("products"))}function obrisiIzKorpe(t){let n=PROIZVODIuKORPI().filter(n=>n.id!=t);localStorage.setItem("products",JSON.stringify(n)),prikaziProizvodeIzKorpe()}function upisiUlocalStorage(t){let n=PROIZVODIuKORPI(),i=this.value;console.log(i);for(let i in n)if(n[i].id==t){n[i].kolicina;break}localStorage.setItem("products",JSON.stringify(n))}function obavestenje(){let t=PROIZVODIuKORPI();t=null,localStorage.setItem("products",JSON.stringify(null)),PrikazZaPraznuKorpu(),alert("USPEŠNO STE NARUČILI!!!")}$(document).ready(function(){let t=JSON.parse(localStorage.getItem("products"));null==t&&(t=0),t.length?prikaziProizvodeIzKorpe():PrikazZaPraznuKorpu(),$(".quantity").on("change",updateKolicinaIUkupnaCenaPoProizvodu)});